<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="css/style.css">
	<style>
		#s_brand_id p{
			line-height: 30px;
			font-size: 20px;

	}
	b{
		font-size: 25px;
	}
	#s_serie_id{
		font-size: 20px;	
		line-height: 40px;
	}
	</style>
</head>
<body>
	<div class="crumbs-r">
	  <div class="analog-select brand" data-flag = "1" data-branId="2">
	   <div class="analog-select-text"><p id="brand">品牌</p></div><!-- 点击 -->
		   <div class="analog-select-con" style='display: none'>
			   <div class="analog-select-conText" id="s_brand_id" style='display: block'>
			   	   <!--此处渲染内容，不允许使用select来实现-->
			   </div>
		   </div>
	   </div>
	   <div class="analog-select" data-flag = "1">
			<div class="analog-select-text" ><p id="types">车系</p></div><!-- 点击 -->
				<div class="analog-select-con" style='display: none'>
				    <div class="analog-select-conText" id="s_serie_id" style='display: block'>
				    	<!--此处渲染内容，不允许使用select来实现-->
				    	<!-- bbbb -->
				    </div>
				</div>
			</div>
			<input type="button" value="选车" class="choose-btn" id="search_serie">
		</div>
	</div>
   </div>
<!-- <script src="js/data.json"></script> -->
<script src="car.js"></script>

<!-- 
<script>

	var analog=document.getElementsByClassName("analog-select-text")[0];//品牌
	var conText=document.getElementById("s_brand_id");//渲染内容
	var conset = document.getElementsByClassName("analog-select-con");//渲染内容框
	var serie=document.getElementById("s_serie_id");
	var types = document.getElementById("types");
	

	



	function init(){//初始化
		Ajax();
	}

	init();
	//封装Ajax
		function Ajax(){

			var xhr;
			try{
				xhr = new XMLHttpRequest();
			}catch(e){

				xhr = new ActiveXObject("Microsoft.XMLHTTP");
			}
		
			xhr.open("get","js/data.json",true)

			xhr.send();

			xhr.onreadystatechange = function(){

				if(xhr.status==200){

					if(xhr.readyState==4){

						var data=JSON.parse(xhr.responseText);//把json中内容变成对象形式
						
						handle(data);//调用handle
				 
					}
				}
			}
		}
		
	//封装点击事件
		function getEvent(obj,type,fn){

			if(obj.addEventListener){

				obj.addEventListener(type,fn,false);

			}else if(obj.attachEvent){

				obj.atachEvent("on"+type,fn);

			}else{

				obj['on'+type]=fn;
			}

		}	

//点击事件
		function getAll(){

			getEvent(analog,'click',function(){
				conset[0].style.display = "block";//让渲染框显示出来
			})

			var pd = conText.getElementsByTagName("p");
			for(var i=0,n=pd.length;i<n;i++){

				getEvent(pd[i],'mouseover',function(){
					this.style.background = "orange";
				})

				getEvent(pd[i],'mouseout',function(){
					this.style.background = "";
				})

				getEvent(pd[i],'click',function(){
					conset[1].style.display="block";
					conset[0].style.display="none";
					analog.innerHTML = this.innerHTML;
					var lisa = this.val;
					var liaa=[];
					
					lisa.forEach(function(item){
						liaa.push('<p>'+item.name+'</p>');
						serie.innerHTML=liaa.join(" ");
					var pt = serie.getElementsByTagName("p")
						for(var i=0;i<pt.length;i++){
							getEvent(pt[i],'mouseover',function(){
							this.style.background="red";
							})

							getEvent(pt[i],'mouseout',function(){
							this.style.background="";
							})

							getEvent(pt[i],'click',function(){
							types.innerHTML=this.innerHTML;
							conset[1].style.display="none";
							})

						}

					})

				})
			
			}
			
		}



	//找json中内容
		function handle(data){

			var list=[];
			
			for(var i in data){//遍历json中所有内容
				var bcet = document.createElement("b");//找到需要的 i ("A","B")
					bcet.innerHTML = i;
					list.push(bcet);
				data[i].forEach(function(item){//找到"A"下的所有内容(item)
					var pcet = document.createElement("p");//找到需要的 i ("A","B")
					pcet.innerHTML = item.brand;
					pcet.val = item.types;
					list.push(pcet);//创建p把所需要的内容放进去
		
				})
			}

			list.forEach(function(item){
				conText.appendChild(item);
			})
			//	放进渲染框中
			getAll();//调用点击事件
		}


</script> -->


</body>
</html>     